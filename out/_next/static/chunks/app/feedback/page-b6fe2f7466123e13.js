(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{27:function(e,t,a){Promise.resolve().then(a.bind(a,9149))},4349:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});let n=a(4090).createContext({selectedType:"All",setSelectedType:()=>{}})},9149:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(3827),l=a(4090),s=a(8792),i=a(6924),r=a(102),o=a(4349),c=a(1150),d=a(9793);let g=l.useLayoutEffect;function m(){return{innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight}}var u=function(){let[e,t]=(0,l.useState)(()=>m());return g(()=>{function e(){t(m())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e};let f=e=>{let t={all:"All",claim:"Claims/Ideas",reasoning:"Warrant/Reasoning/Backing",evidence:"Evidence",rebuttal:"Rebuttal/Reservation",others:"General Content",orthography:"Conventions/Grammar/Spelling",organization:"Organization","word-usage":"Word Usage/Clarity","word usage":"Word Usage/Clarity"},a=e=>{var a,n;let l=e.toLowerCase();return null!==(n=null!==(a=t[l])&&void 0!==a?a:t[l.replace(/\s+/g,"-")])&&void 0!==n?n:e},{innerWidth:l,innerHeight:s,outerHeight:o,outerWidth:c}=u();return(0,n.jsxs)("div",{className:"flex flex-row gap-2 select-none items-end",children:[(0,n.jsx)(i.oi,{id:"search",type:"text",placeholder:"Search by keywords...",icon:r.adB,value:e.searchText,onChange:t=>{e.setSearchText(t.target.value)},onBlur:e=>{(0,d.xT)({event:"feedback_filter_search",text:e.target.value})},className:"min-w-48 grow",color:"light"}),(0,n.jsxs)(i.Lt,{label:"All"===e.selectedFile?"Reviewer":e.selectedFile,color:"light",title:"Provider",theme:{floating:{target:"focus:ring-gray-800"}},className:"rounded-lg 2xl:mr-4",children:[(0,n.jsx)("div",{className:"font-semibold text-sm mx-2 my-2",children:"Provider"}),(0,n.jsx)("div",{className:"border-t border-gray-100 my-2"}),e.uniqueFiles.map(t=>(0,n.jsx)(i.Lt.Item,{onClick:()=>{(0,d.xT)({event:"feedback_filter_file",file:t}),e.setSelectedFile(t)},children:t},t))]}),(0,n.jsxs)(i.Lt,{label:"All"===e.selectedType?"Category":e.selectedType,color:"light",title:"Type",theme:{floating:{target:"focus:ring-gray-800"}},className:"rounded-lg",children:[(0,n.jsx)("div",{className:"font-semibold text-sm mx-2 my-2",children:"Type"}),(0,n.jsx)("div",{className:"border-t border-gray-100 my-2"}),e.uniqueTypes.map(t=>(0,n.jsx)(i.Lt.Item,{onClick:()=>{(0,d.xT)({event:"feedback_filter_type",type:t}),e.setSelectedType(t)},children:a(t)},t))]}),(0,n.jsxs)(i.Lt,{label:"Helpfulness",color:"light",title:"Helpfulness",theme:{floating:{target:"focus:ring-gray-800"}},className:"rounded-lg",children:[(0,n.jsx)("div",{className:"font-semibold text-sm mx-2 my-2",children:"Helpfulness"}),(0,n.jsx)("div",{className:"border-t border-gray-100 my-2"}),(0,n.jsx)(i.Lt.Item,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"all",className:"font-medium",children:["Total: ",e.engagement]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("input",{id:"all",type:"range",min:"0",max:"4",step:"0.01",value:e.engagement,onChange:t=>{e.setEngagement(parseFloat(t.target.value)),(0,d.xT)({event:"feedback_filter_engagement",range:t.target.value})},className:"w-fit h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 range-sm"}),(0,n.jsx)("span",{children:"4"})]})]})}),(0,n.jsx)(i.Lt.Item,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"sentiment",className:"font-medium",children:["Negativity: ",e.sentiment]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("input",{id:"sentiment",type:"range",min:"0",max:"1",step:"0.01",value:e.sentiment,onChange:t=>{e.setSentiment(parseFloat(t.target.value)),(0,d.xT)({event:"feedback_filter_sentiment",range:t.target.value})},className:"w-fit h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 range-sm"}),(0,n.jsx)("span",{children:"1"})]})]})}),(0,n.jsx)(i.Lt.Item,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"actionability",className:"font-medium",children:["Actionability: ",e.actionability]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("input",{id:"actionability",type:"range",min:"0",max:"1",step:"0.01",value:e.actionability,onChange:t=>{e.setActionability(parseFloat(t.target.value)),(0,d.xT)({event:"feedback_filter_actionability",range:t.target.value})},className:"w-fit h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 range-sm"}),(0,n.jsx)("span",{children:"1"})]})]})}),(0,n.jsx)(i.Lt.Item,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"justification",className:"font-medium",children:["Justification: ",e.justification]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("input",{id:"justification",type:"range",min:"0",max:"1",step:"0.01",value:e.justification,onChange:t=>{e.setJustification(parseFloat(t.target.value)),(0,d.xT)({event:"feedback_filter_justification",range:t.target.value})},className:"w-fit h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 range-sm"}),(0,n.jsx)("span",{children:"1"})]})]})}),(0,n.jsx)(i.Lt.Item,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"specificity",className:"font-medium",children:["Specificity: ",e.specificity]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"0"}),(0,n.jsx)("input",{id:"specificity",type:"range",min:"0",max:"1",step:"0.01",value:e.specificity,onChange:t=>{e.setSpecificity(parseFloat(t.target.value)),(0,d.xT)({event:"feedback_filter_specificity",range:t.target.value})},className:"w-fit h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 range-sm"}),(0,n.jsx)("span",{children:"1"})]})]})})]})]})};var x=a(5003);let p=e=>{let{text:t}=e,a={claim:"Claims/Ideas",reasoning:"Warrant/Reasoning/Backing",evidence:"Evidence",rebuttal:"Rebuttal/Reservation",others:"General Content",orthography:"Conventions/Grammar/Spelling",organization:"Organization","word-usage":"Word Usage/Clarity"},l=["Claim","Reasoning","Evidence","Rebuttal","Others","Orthography","Organization","Word Usage"],s=t.split(/(\s+)/).map((e,t)=>{let s=l.find(t=>e.includes(t));if(s){let e=s.toLowerCase();return"Word Usage"===s&&(e="word-usage"),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"font-semibold",children:a[e]}),","]},t)}return e});return(0,n.jsx)("span",{className:"text-xs",children:s})};var h=()=>{let e=e=>e.trim().toLowerCase().replace(/\s+/g,"-"),{selectedType:t,setSelectedType:a}=(0,l.useContext)(o.z),g=(0,x.X3)(e=>e.feedbackSummary),m=(0,x.we)(e=>e.globalSentence),u=(0,x.B_)(e=>e.setGlobalFeedback),h=(0,x.I9)(e=>e.globalHumanPlan),b=(0,x.I9)(e=>e.initiateOneGlobalHumanPlan),y=(0,x.I9)(e=>e.ifSinglePlanCompletedBySentenceIdAndFeedback),v=(0,x.c)(e=>e.getFeedbackBySentenceId),j=(0,x.c)(e=>e.feedback),[w,k]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(0===Object.keys(m).length){k(j);return}let e=v(m.id);if(k(e),h.find(e=>e.sentence===m.content))return;let t=[];null==e||e.forEach(e=>{t.push({feedback:e.content,why:"",how:""})}),b({id:m.id,sentence:m.content,reflection:t})},[m,j,h,v,b]);let[N,C]=(0,l.useState)(""),[S,T]=(0,l.useState)("All"),[_,F]=(0,l.useState)("All"),[L,A]=(0,l.useState)(0),[E,I]=(0,l.useState)(0),[O,P]=(0,l.useState)(0),[z,R]=(0,l.useState)(0),[W,H]=(0,l.useState)(0);(0,l.useEffect)(()=>{(0,d.xT)({event:"view_feedback_page",sentence:0===Object.keys(m).length?"all":m.id})},[m]);let B=(0,l.useMemo)(()=>{let e=null==w?void 0:w.filter(e=>![""].includes(e.type));if(e)return[...e].sort((e,t)=>e.source!==t.source?t.source-e.source:t.engagement-e.engagement)},[w]),G=(0,l.useMemo)(()=>{var e;let t=null!==(e=null==B?void 0:B.map(e=>e.file))&&void 0!==e?e:[];return["All",...Array.from(new Set(t))]},[B]),U=(0,l.useMemo)(()=>{var e;let t=null!==(e=null==B?void 0:B.map(e=>e.type))&&void 0!==e?e:[];return["All",...Array.from(new Set(t))]},[B]),q=(0,l.useMemo)(()=>null==B?void 0:B.filter(a=>{let n=e(a.type),l=e(t);return a.content.toLowerCase().includes(N.toLowerCase())&&("All"===S||a.file===S)&&("All"===t||n===l)&&("All"===_||a.engagement>=(parseInt(_)-1)*1&&a.engagement<1*parseInt(_))&&a.actionability>=E&&a.justification>=O&&a.specificity>=z&&a.sentiment>=L&&a.actionability+a.justification+a.specificity+a.sentiment>=W}),[B,N,S,t,_,L,E,O,z,W]);return(0,l.useEffect)(()=>{q&&0!==q.length&&(u(q),(0,d.xT)({event:"view_feedback",sentence:0===Object.keys(m).length?"all":m.id,keywords:N.toLowerCase(),file:S.toLowerCase(),type:t.toLowerCase(),engagement:_.toLowerCase()}))},[q,m,N,S,t,_,u]),(0,n.jsxs)("div",{className:"flex flex-col h-screen w-full py-4 px-8 bg-gray-50 text-gray-800",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"border-2 p-4 bg-white rounded-lg text-sm",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center pb-2 font-medium",children:[(0,n.jsx)(r.QcQ,{size:20}),(0,n.jsx)("p",{children:"Feedback Overview"})]}),(0,n.jsx)(p,{text:g})]}),(0,n.jsx)(f,{searchText:N,setSearchText:C,selectedFile:S,setSelectedFile:T,uniqueFiles:G,selectedType:t,setSelectedType:a,uniqueTypes:U,selectedEngagementRange:_,setSelectedEngagementRange:F,sentiment:L,setSentiment:A,actionability:E,setActionability:I,justification:O,setJustification:P,specificity:z,setSpecificity:R,engagement:W,setEngagement:H}),(0,n.jsx)("div",{className:"border-t border-dashed border-gray-200 w-full my-2"})]}),(0,n.jsx)("div",{className:"overflow-y-auto grow py-2 pb-40",children:(0,n.jsx)("div",{className:"flex flex-col gap-2 mx-2",children:q&&q.length>0?q.map(e=>(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(c.O,{feedbackItem:e,classes:"relative rounded-lg hover:scale-[1.01] transition-all duration-150 ".concat(y(m.id,e.content)?"overflow-hidden ring-2 ring-emerald-500 ring-offset-2 ring-offset-emerald-100 before:content-[''] before:absolute before:-m-5 before:w-10 before:h-10 before:rotate-45 before:bg-emerald-500":""),close:!0,selectedFeedback:w,setSelectedFeedback:k}),(0,n.jsx)("div",{className:"border-t border-dashed border-gray-200 w-full"})]},e.id)):(0,n.jsx)("p",{className:"mx-6 text-sm text-gray-400 select-none",children:"No feedback available."})})}),0!==Object.keys(m).length&&(0,n.jsx)(s.default,{href:"/plan",onClick:e=>{q&&0!==q.length||(e.preventDefault(),alert("Please keep at least a feedback item before proceeding to reflection."))},children:(0,n.jsx)(i.zx,{color:"dark",className:"z-50 fixed bottom-6 right-8 w-40 cursor-pointer enabled:hover:ring-white enabled:ring-white hover:ring-white transition-all duration-150 hover:scale-105",children:"Go to Plan"})})]})}}},function(e){e.O(0,[950,481,366,670,501,458,792,276,793,150,971,69,744],function(){return e(e.s=27)}),_N_E=e.O()}]);