(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{6674:function(e,t,n){"use strict";n.r(t);var s=n(3827);n(4090);var a=n(8792),r=n(9793),i=n(7907),l=n(102),o=n(5003);t.default=()=>{let e=(0,i.usePathname)(),t=(0,o.we)(e=>e.globalSentence),n=(0,o.we)(e=>e.setGlobalSentence),c=(0,o.B_)(e=>e.setGlobalFeedback),d=t=>e.includes(t)?"font-semibold underline underline-offset-8 text-gray-800":"font-medium text-gray-400 hover:text-gray-800";return(0,s.jsxs)("div",{className:"flex flex-row bg-white gap-2 items-center font-medium text-base text-gray-400 w-full justify-center p-4 border-b border-gray-100 select-none",children:[(0,s.jsx)(a.default,{href:"\\feedback",className:(0,r.cn)(d("/feedback")+" w-20"),onClick:()=>{n({}),c([])},children:"Feedback"}),(0,s.jsx)(l.A3p,{size:16}),(0,s.jsx)(a.default,{href:"\\plan",className:(0,r.cn)(d("/plan")+" w-12 text-center"),onClick:e=>{0===Object.keys(t).length&&(alert("Please select a sentence before proceeding to reflection."),e.preventDefault())},children:"Plan"}),(0,s.jsx)(l.A3p,{size:16}),(0,s.jsx)(a.default,{href:"\\revision",className:(0,r.cn)(d("/revision")+" w-20"),onClick:e=>{0===Object.keys(t).length&&(alert("Please select a sentence before proceeding to revision."),e.preventDefault())},children:"Revision"})]})}},2249:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(3827),a=n(4090),r=n(9793),i=n(7907),l=n(5003);let o=e=>(0,s.jsx)("span",{className:"block absolute border-[1px] border-white hover:border-[1px] hover:border-gray-300 transition-all duration-150 ease-in-out hover:scale-110 hover:-translate-y-[1px] hover:z-10",style:{height:"".concat(e.spanData.height,"px"),top:"".concat(e.spanData.y,"px"),right:"".concat(e.rightOffset,"px"),width:"".concat(e.width,"px"),backgroundColor:function(e,t){let n={Claim:["#fdf2f8","#fce7f3","#f9a8d4","#ec4899","#be185d","#831843"],Reasoning:["#fef2f2","#fee2e2","#fca5a5","#ef4444","#b91c1c","#7f1d1d"],Evidence:["#fff7ed","#ffedd5","#fdba74","#f97316","#c2410c","#7c2d12"],Rebuttal:["#fffbeb","#fef3c7","#fcd34d","#f59e0b","#b45309","#78350f"],Others:["#fafaf9","#f5f5f4","#d6d3d1","#78716c","#44403c","#1c1917"],Orthography:["#f5f3ff","#ede9fe","#c4b5fd","#8b5cf6","#6d28d9","#4c1d95"],Organization:["#eff6ff","#dbeafe","#93c5fd","#3b82f6","#1d4ed8","#1e3a8a"],"Word Usage":["#ecfeff","#cffafe","#67e8f9","#06b6d4","#0e7490","#164e63"],Plan:["#f0fdf4","#dcfce7","#86efac","#22c55e","#15803d","#14532d"]};if(0===t)return n[e][0]||"#FFFFFF";let s=n[e]||[],a=Math.min(t,s.length-1);return s[a]}(e.category,e.spanData.density)},onMouseEnter:t=>{e.setHoverTip({text:e.text,x:t.clientX,y:t.clientY-50,density:e.spanData.density}),(0,r.xT)({event:"hover_density_rect",sentence:e.id,dimension:e.category.toLowerCase(),density:e.spanData.density})},onMouseLeave:()=>e.setHoverTip(null)}),c=e=>{let[t,n]=(0,a.useState)(null),r=t=>{e.setSelectedType&&e.setSelectedType(t)};return(0,s.jsxs)(s.Fragment,{children:[e.claimSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Claim"),children:(0,s.jsx)(o,{id:e.id,spanData:e.claimSpans[e.id-1],rightOffset:"184",category:"Claim",text:"Claims/Ideas",width:24,setHoverTip:n})}),e.reasoningSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Reasoning"),children:(0,s.jsx)(o,{id:e.id,spanData:e.reasoningSpans[e.id-1],rightOffset:"160",category:"Reasoning",text:"Warrant/Reasoning/Backing",width:24,setHoverTip:n})}),e.evidenceSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Evidence"),children:(0,s.jsx)(o,{id:e.id,spanData:e.evidenceSpans[e.id-1],rightOffset:"136",category:"Evidence",text:"Evidence",width:24,setHoverTip:n})}),e.rebuttalSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Rebuttal"),children:(0,s.jsx)(o,{id:e.id,spanData:e.rebuttalSpans[e.id-1],rightOffset:"112",category:"Rebuttal",text:"Rebuttal/Reservation",width:24,setHoverTip:n})}),e.othersSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Others"),children:(0,s.jsx)(o,{id:e.id,spanData:e.othersSpans[e.id-1],rightOffset:"88",category:"Others",text:"General Content",width:24,setHoverTip:n})}),e.orthographySpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Orthography"),children:(0,s.jsx)(o,{id:e.id,spanData:e.orthographySpans[e.id-1],rightOffset:"64",category:"Orthography",text:"Conventions/Grammar/Spelling",width:24,setHoverTip:n})}),e.organizationSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Organization"),children:(0,s.jsx)(o,{id:e.id,spanData:e.organizationSpans[e.id-1],rightOffset:"40",category:"Organization",text:"Organization",width:24,setHoverTip:n})}),e.wordUsageSpans[e.id-1]&&(0,s.jsx)("span",{onClick:()=>r("Word Usage"),children:(0,s.jsx)(o,{id:e.id,spanData:e.wordUsageSpans[e.id-1],rightOffset:"16",category:"Word Usage",text:"Word Usage/Clarity",width:24,setHoverTip:n})}),t&&(0,s.jsxs)("div",{className:"fixed whitespace-nowrap rounded-lg bg-white -translate-x-full -translate-y-full shadow-lg p-2 z-30 border text-[10px] leading-3 font-medium",style:{left:"".concat(t.x,"px"),top:"".concat(t.y+25,"px")},children:["# ",t.text,": (",t.density,")"]})]})};var d=n(191),f=n.n(d);let h=()=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:f().className+" absolute right-[200px] top-8 bg-pink-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"C"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[176px] top-8 bg-red-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"W"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[152px] top-8 bg-orange-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"E"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[128px] top-8 bg-amber-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"R"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[104px] top-8 bg-stone-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"G"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[80px] top-8 bg-violet-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"C"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[56px] top-8 bg-blue-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"O"})}),(0,s.jsx)("div",{className:f().className+" absolute right-[32px] top-8 bg-cyan-500 w-[24px] h-[24px] rounded text-center text-white text-sm font-bold flex justify-center items-center italic",children:(0,s.jsx)("p",{children:"U"})})]});var p=n(1350),x=e=>{let t=(0,i.useRouter)(),n=(0,l.fp)(e=>e.isRevisionBetter),o=(0,l.we)(e=>e.globalSentence),d=(0,l.we)(e=>e.setGlobalSentence),f=(0,l.GL)(e=>e.essay),x=(0,l.be)(e=>e),u=(0,a.useMemo)(()=>f.reduce((e,t)=>(e[t.paragraph]=e[t.paragraph]||[],e[t.paragraph].push(t),e),{}),[f]),g=(0,i.usePathname)(),[b,m]=(0,a.useState)(null),v=e=>{m(e)},y=()=>{m(null)},j=e=>{o.content===e.content?d({}):d(e),"/plan"===g&&(console.log("redirecting to /feedback"),t.push("/feedback"))},[w,S]=(0,a.useState)([]),[k,N]=(0,a.useState)([]),[C,O]=(0,a.useState)([]),[_,R]=(0,a.useState)([]),[T,E]=(0,a.useState)([]),[F,D]=(0,a.useState)([]),[z,M]=(0,a.useState)([]),[H,P]=(0,a.useState)([]),B=(0,l.E9)(e=>e.getDistributionAcrossSentences),L=(0,a.useRef)([]),U=(0,a.useRef)(null),G=["claim","evidence","reasoning","rebuttal","others","orthography","organization","word-usage"];return(0,a.useEffect)(()=>{let e=e=>{let t;if(!(t=e?x.getFeedbackCategoryDistributionByCategory(e):B()))return;let n=Object.keys(t);if(0===n.length||void 0===t)return;let s=U.current;if(!s)return;let a=s.getBoundingClientRect(),r=L.current.filter(Boolean).map((e,r)=>{if(!e||!s)return null;let i=e.getBoundingClientRect(),l=t[n[r]]||0,o=Math.floor(i.height/32);return{height:32*(0==i.height%32?o:o+1),y:i.top-a.top+s.scrollTop,density:l}}).filter(Boolean);"claim"===e&&S(r),"reasoning"===e&&N(r),"evidence"===e&&O(r),"rebuttal"===e&&R(r),"others"===e&&E(r),"orthography"===e&&D(r),"organization"===e&&M(r),"word-usage"===e&&P(r)};G.forEach(t=>{e(t)}),e();let t=U.current;return t&&t.addEventListener("scroll",()=>{G.forEach(t=>{e(t)}),e()}),()=>{t&&t.removeEventListener("scroll",()=>{G.forEach(t=>{e(t)})})}},[f]),(0,s.jsxs)("div",{className:(0,r.cn)(e.classes+" font-normal border-l border-gray-100 text-gray-800 flex flex-col select-none bg-white relative h-screen"),children:[(0,s.jsx)("div",{className:"h-16 font-semibold pl-8 text-xl bg-white border-gray-100 text-gray-800 py-4 flex flex-row items-center gap-2",children:(0,s.jsx)("p",{children:"My Essay"})}),(0,s.jsxs)("div",{ref:U,className:"text-base leading-8 pl-8 pr-56 overflow-y-auto relative grow",children:[Object.entries(u).map((t,i,l)=>{let[f,h]=t;return(0,s.jsx)("div",{className:(i<l.length-1?"mb-6 ":"")+"cursor-pointer",children:h.map(t=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)("span",{id:t.id.toString(),ref:e=>{L.current[t.id]=e},onMouseEnter:()=>v(t.id),onMouseLeave:y,className:(0,r.cn)({"bg-green-100":n(t.content),"bg-sky-100":b===t.id||o.id&&o.id===t.id}),onClick:()=>j(t),children:[(0,s.jsx)(p.Z,{text:t.content})," "]}),(0,s.jsxs)("span",{onMouseEnter:()=>v(t.id),onMouseLeave:y,onClick:()=>{d(t)},children:[" ",(0,s.jsx)(c,{id:t.id,claimSpans:w,reasoningSpans:k,evidenceSpans:C,rebuttalSpans:_,othersSpans:T,orthographySpans:F,organizationSpans:z,wordUsageSpans:H,setSelectedType:e.setSelectedType,selectedType:e.selectedType})]})]},"section-".concat(t.id)))},f)}),(0,s.jsx)("div",{className:"h-24 w-full"})]}),(0,s.jsx)(h,{})]})}},1350:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(3827),a=n(4090),r=n(2492);let i=/\\\[([\s\S]+?)\\\]|\\\(([\s\S]+?)\\\)|\$\$([\s\S]+?)\$\$|\$([^$\n]+)\$/g,l=/\\section\{([^}]*)\}|\\subsection\{([^}]*)\}/g;function o(e){let{text:t}=e,n=e=>{let t=[],n=0,r=0;for(let c of e.matchAll(l)){var i,o;let l=null!==(i=c.index)&&void 0!==i?i:0,d=l+c[0].length,f=e.slice(n,l);f&&t.push((0,s.jsx)(a.Fragment,{children:f},"plain-txt-".concat(r++)));let h=c[1],p=c[2],x=!!h,u=(null!==(o=null!=h?h:p)&&void 0!==o?o:"").trim();t.push((0,s.jsx)("span",{className:x?"block text-2xl font-semibold my-4":"block text-xl font-semibold my-3",children:u},"plain-sec-".concat(r++))),n=d}let c=e.slice(n);return c&&t.push((0,s.jsx)(a.Fragment,{children:c},"plain-txt-".concat(r++))),t.length>0?t:[e]},o=[],c=0,d=0;for(let e of t.matchAll(i)){var f,h,p,x;let i=null!==(f=e.index)&&void 0!==f?f:0,l=i+e[0].length,u=t.slice(c,i);if(u)for(let e of n(u))o.push((0,s.jsx)(a.Fragment,{children:e},"txt-".concat(d++)));let g=e[1],b=e[2],m=e[3],v=e[4],y=null!==(x=null!==(p=null!==(h=null!=g?g:b)&&void 0!==h?h:m)&&void 0!==p?p:v)&&void 0!==x?x:"",j=!!(null!=g?g:m);o.push((0,s.jsx)("span",{className:j?"block my-1":void 0,dangerouslySetInnerHTML:{__html:r.ZP.renderToString(y,{throwOnError:!1,displayMode:j,strict:"warn"})}},"math-".concat(d++))),c=l}let u=t.slice(c);if(u)for(let e of n(u))o.push((0,s.jsx)(a.Fragment,{children:e},"txt-".concat(d++)));return(0,s.jsx)(s.Fragment,{children:o.length>0?o:t})}},7907:function(e,t,n){"use strict";var s=n(5313);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},191:function(e){e.exports={style:{fontFamily:"'__Noto_Serif_c20327', '__Noto_Serif_Fallback_c20327'"},className:"__className_c20327"}}}]);